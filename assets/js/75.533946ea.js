(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{575:function(t,s,m){"use strict";m.r(s);var a=m(6),c=Object(a.a)({},(function(){var t=this,s=t.$createElement,m=t._self._c||s;return m("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[m("p",[m("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNly1gtqjt0a9rnj61ou0pwaci02.jpg",alt:""}})]),t._v(" "),m("h2",{attrs:{id:"请简述基于用户的协同过滤usercf的推荐过程。"}},[m("a",{staticClass:"header-anchor",attrs:{href:"#请简述基于用户的协同过滤usercf的推荐过程。"}},[t._v("#")]),t._v(" 请简述基于用户的协同过滤UserCF的推荐过程。")]),t._v(" "),m("p",[t._v("UserCF（User Collaboration Filter），即基于用户的协同过滤算法。其中协同过滤的含义是不同的用户通过与item的互动比如点赞、收藏等，使自己的推荐列表过滤掉自己不感兴趣的物品，从而得到最终的推荐结果。")]),t._v(" "),m("p",[t._v("以电商网站为例，他的步骤一般分为：")]),t._v(" "),m("p",[t._v("1）构成用户交互行为共现矩阵")]),t._v(" "),m("p",[t._v("假如用户对商品有浏览、收藏、加入购物车、购买这四种交互行为，我们分别给他们赋予分数 1分/3分/5分/10分，然后转化为共现矩阵，其中第一列表示用户，第一行表示商品，如下：")]),t._v(" "),m("table",[m("thead",[m("tr",[m("th"),t._v(" "),m("th",[t._v("item1")]),t._v(" "),m("th",[t._v("item2")]),t._v(" "),m("th",[t._v("item3")]),t._v(" "),m("th",[t._v("item4")]),t._v(" "),m("th",[t._v("item5")]),t._v(" "),m("th",[t._v("item6")])])]),t._v(" "),m("tbody",[m("tr",[m("td",[t._v("A")]),t._v(" "),m("td",[t._v("1")]),t._v(" "),m("td"),t._v(" "),m("td",[t._v("5")]),t._v(" "),m("td",[t._v("3")]),t._v(" "),m("td"),t._v(" "),m("td")]),t._v(" "),m("tr",[m("td",[t._v("B")]),t._v(" "),m("td"),t._v(" "),m("td",[t._v("3")]),t._v(" "),m("td"),t._v(" "),m("td"),t._v(" "),m("td",[t._v("3")]),t._v(" "),m("td")]),t._v(" "),m("tr",[m("td",[t._v("C")]),t._v(" "),m("td",[t._v("5")]),t._v(" "),m("td"),t._v(" "),m("td",[t._v("3")]),t._v(" "),m("td"),t._v(" "),m("td"),t._v(" "),m("td",[t._v("10")])]),t._v(" "),m("tr",[m("td",[t._v("D")]),t._v(" "),m("td",[t._v("10")]),t._v(" "),m("td"),t._v(" "),m("td"),t._v(" "),m("td"),t._v(" "),m("td",[t._v("5")]),t._v(" "),m("td")]),t._v(" "),m("tr",[m("td",[t._v("E")]),t._v(" "),m("td"),t._v(" "),m("td",[t._v("10")]),t._v(" "),m("td",[t._v("5")]),t._v(" "),m("td",[t._v("1")]),t._v(" "),m("td"),t._v(" "),m("td")])])]),t._v(" "),m("p",[t._v("2）用户相似度计算")]),t._v(" "),m("p",[t._v("生成共现矩阵之后，问题就转为预测共现矩阵中空白位置的值。UserCF通过计算用户之间的相似度，找到用户相似度最高的topN个用户。")]),t._v(" "),m("p",[t._v("关于相似度计算，我们会在下一个问答中进行详细描述。")]),t._v(" "),m("p",[t._v("3）最终结果排序")]),t._v(" "),m("p",[t._v("得到相似度最高的N个用户之后，我们假定目标用户与其相似用户的喜好是相似的，可以根据其相似用户的已有评价对目标用户的偏好进行预测。往往通过加权平均的方式计算：")]),t._v(" "),m("p"),m("p",[m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML",display:"true"}},[m("mjx-math",{staticClass:" MJX-TEX",attrs:{display:"true"}},[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"="}})],1),m("mjx-mfrac",{attrs:{space:"4"}},[m("mjx-frac",{attrs:{type:"d"}},[m("mjx-num",[m("mjx-nstrut",{attrs:{type:"d"}}),m("mjx-mrow",[m("mjx-munder",{attrs:{limits:"false"}},[m("mjx-mo",{staticClass:"mjx-sop"},[m("mjx-c",{attrs:{c:"2211"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.285em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2208"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"S"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"w"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"B7"}})],1),m("mjx-msub",{attrs:{space:"3"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1)],1)],1),m("mjx-dbox",[m("mjx-dtable",[m("mjx-line",{attrs:{type:"d"}}),m("mjx-row",[m("mjx-den",[m("mjx-dstrut",{attrs:{type:"d"}}),m("mjx-mrow",[m("mjx-munder",{attrs:{limits:"false"}},[m("mjx-mo",{staticClass:"mjx-sop"},[m("mjx-c",{attrs:{c:"2211"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.285em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2208"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"S"}})],1)],1)],1)],1),m("mjx-msub",{attrs:{space:"2"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"w"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),m("p"),t._v(" "),m("p",[t._v("其中"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"w"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1)],1)],1)],1)],1)],1),t._v("表示用户u和用户s的相似度，"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1)],1)],1),t._v("表示用户s对物品p的评分。最终的推荐列表根据预测得分进行排序即可。")],1),t._v(" "),m("h2",{attrs:{id:"在基于用户的协同过滤中-如何计算用户的相似度"}},[m("a",{staticClass:"header-anchor",attrs:{href:"#在基于用户的协同过滤中-如何计算用户的相似度"}},[t._v("#")]),t._v(" 在基于用户的协同过滤中，如何计算用户的相似度？")]),t._v(" "),m("p",[t._v("计算两个向量相似度的方式很多，cosine余弦是被证明在很多场景效果都不错的一个算法，但并不是所有场景cosine余弦都是最好的，需要针对不同场景做尝试和对比。")]),t._v(" "),m("p",[t._v("共现矩阵中的行向量表示用户向量，计算用户i和用户j的相似度问题，就是计算用户向量i和用户向量j之间的相似度，往往有以下几种方法：")]),t._v(" "),m("ul",[m("li",[t._v("余弦相似度")])]),t._v(" "),m("p"),m("p",[m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML",display:"true"}},[m("mjx-math",{staticClass:" MJX-TEX",attrs:{display:"true"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"j"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"="}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"c"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"o"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"j"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"="}})],1),m("mjx-mfrac",{attrs:{space:"4"}},[m("mjx-frac",{attrs:{type:"d"}},[m("mjx-num",[m("mjx-nstrut",{attrs:{type:"d"}}),m("mjx-mrow",[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"B7"}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"j"}})],1)],1)],1),m("mjx-dbox",[m("mjx-dtable",[m("mjx-line",{attrs:{type:"d"}}),m("mjx-row",[m("mjx-den",[m("mjx-dstrut",{attrs:{type:"d"}}),m("mjx-mrow",[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"B7"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"j"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),m("p"),t._v(" "),m("p",[t._v("余弦相似度的缺陷是认为缺失值是0，但实际上并不总是如此。它衡量了用户向量i和用户向量j之间的向量夹角大小，夹角越小，余弦相似度越大，用户则越相似。")]),t._v(" "),m("p",[t._v("针对隐式反馈(用户只有点击等行为，没有评分)，向量的元素要么为1要么为0，直接用cosine余弦公式效果不是很好，可以对隐式反馈进行打分，比如浏览给1分，收藏给3分，分享给5分等，取用户对item所有的隐式反馈行为中得分最高的.")]),t._v(" "),m("ul",[m("li",[t._v("皮尔逊相关系数")])]),t._v(" "),m("p"),m("p",[m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML",display:"true"}},[m("mjx-math",{staticClass:" MJX-TEX",attrs:{display:"true"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"j"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"="}})],1),m("mjx-mfrac",{attrs:{space:"4"}},[m("mjx-frac",{attrs:{type:"d"}},[m("mjx-num",[m("mjx-nstrut",{attrs:{type:"d"}}),m("mjx-mrow",[m("mjx-munder",{attrs:{limits:"false"}},[m("mjx-mo",{staticClass:"mjx-sop"},[m("mjx-c",{attrs:{c:"2211"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.285em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2208"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"P"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"2212"}})],1),m("mjx-TeXAtom",{attrs:{space:"3"}},[m("mjx-mover",[m("mjx-over",{staticStyle:{"padding-bottom":"0.06em","padding-left":"0.36em","margin-bottom":"-0.544em"}},[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"AF"}})],1)],1),m("mjx-base",[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"i"}})],1)],1)],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"j"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"2212"}})],1),m("mjx-msub",[m("mjx-TeXAtom",[m("mjx-mover",[m("mjx-over",{staticStyle:{"padding-bottom":"0.06em","padding-left":"0.213em","margin-bottom":"-0.544em"}},[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"AF"}})],1)],1),m("mjx-base",[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"R"}})],1)],1)],1)],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"j"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1)],1)],1),m("mjx-dbox",[m("mjx-dtable",[m("mjx-line",{attrs:{type:"d"}}),m("mjx-row",[m("mjx-den",[m("mjx-dstrut",{attrs:{type:"d"}}),m("mjx-msqrt",[m("mjx-sqrt",[m("mjx-surd",[m("mjx-mo",{staticClass:"mjx-lop"},[m("mjx-c",{attrs:{c:"221A"}})],1)],1),m("mjx-box",{staticStyle:{"padding-top":"0.207em"}},[m("mjx-munder",{attrs:{limits:"false"}},[m("mjx-mo",{staticClass:"mjx-sop"},[m("mjx-c",{attrs:{c:"2211"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.285em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2208"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"P"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"2212"}})],1),m("mjx-TeXAtom",{attrs:{space:"3"}},[m("mjx-mover",[m("mjx-over",{staticStyle:{"padding-bottom":"0.06em","padding-left":"0.36em","margin-bottom":"-0.544em"}},[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"AF"}})],1)],1),m("mjx-base",[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"i"}})],1)],1)],1)],1)],1)],1),m("mjx-msup",[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"0.363em"}},[m("mjx-mn",{staticClass:"mjx-n",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"2"}})],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"j"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"2212"}})],1),m("mjx-msub",[m("mjx-TeXAtom",[m("mjx-mover",[m("mjx-over",{staticStyle:{"padding-bottom":"0.06em","padding-left":"0.213em","margin-bottom":"-0.544em"}},[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"AF"}})],1)],1),m("mjx-base",[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"R"}})],1)],1)],1)],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"j"}})],1)],1)],1)],1),m("mjx-msup",[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"0.363em"}},[m("mjx-mn",{staticClass:"mjx-n",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"2"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),m("p"),t._v(" "),m("p",[t._v("皮尔逊相似度使用用户平均分对评分进行修正，减小了用户评分偏置的影响。缺失值也是按用户平均分计算。其中"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1)],1)],1),t._v("表示用户i对物品p的打分，"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-TeXAtom",[m("mjx-mover",[m("mjx-over",{staticStyle:{"padding-bottom":"0.06em","padding-left":"0.36em","margin-bottom":"-0.544em"}},[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"AF"}})],1)],1),m("mjx-base",[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"i"}})],1)],1)],1)],1)],1)],1)],1)],1),t._v("表示用户i对所有物品的平均均分，p表示所有物品的集合。")],1),t._v(" "),m("p",[t._v("也可引入物品相似度的方式对其改造，从而减少物品评分偏置对结果的影响。其中"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-TeXAtom",[m("mjx-mover",[m("mjx-over",{staticStyle:{"padding-bottom":"0.06em","padding-left":"0.416em","margin-bottom":"-0.544em"}},[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"AF"}})],1)],1),m("mjx-base",[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1)],1)],1)],1)],1),t._v("代表物品p得到所有评分的平均分。")],1),t._v(" "),m("p"),m("p",[m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML",display:"true"}},[m("mjx-math",{staticClass:" MJX-TEX",attrs:{display:"true"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"j"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"="}})],1),m("mjx-mfrac",{attrs:{space:"4"}},[m("mjx-frac",{attrs:{type:"d"}},[m("mjx-num",[m("mjx-nstrut",{attrs:{type:"d"}}),m("mjx-mrow",[m("mjx-munder",{attrs:{limits:"false"}},[m("mjx-mo",{staticClass:"mjx-sop"},[m("mjx-c",{attrs:{c:"2211"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.285em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2208"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"P"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"2212"}})],1),m("mjx-TeXAtom",{attrs:{space:"3"}},[m("mjx-mover",[m("mjx-over",{staticStyle:{"padding-bottom":"0.06em","padding-left":"0.416em","margin-bottom":"-0.544em"}},[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"AF"}})],1)],1),m("mjx-base",[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"j"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"2212"}})],1),m("mjx-msub",[m("mjx-TeXAtom",[m("mjx-mover",[m("mjx-over",{staticStyle:{"padding-bottom":"0.06em","padding-left":"0.213em","margin-bottom":"-0.544em"}},[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"AF"}})],1)],1),m("mjx-base",[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"R"}})],1)],1)],1)],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1)],1)],1),m("mjx-dbox",[m("mjx-dtable",[m("mjx-line",{attrs:{type:"d"}}),m("mjx-row",[m("mjx-den",[m("mjx-dstrut",{attrs:{type:"d"}}),m("mjx-msqrt",[m("mjx-sqrt",[m("mjx-surd",[m("mjx-mo",{staticClass:"mjx-lop"},[m("mjx-c",{attrs:{c:"221A"}})],1)],1),m("mjx-box",{staticStyle:{"padding-top":"0.207em"}},[m("mjx-munder",{attrs:{limits:"false"}},[m("mjx-mo",{staticClass:"mjx-sop"},[m("mjx-c",{attrs:{c:"2211"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.285em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2208"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"P"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"2212"}})],1),m("mjx-TeXAtom",{attrs:{space:"3"}},[m("mjx-mover",[m("mjx-over",{staticStyle:{"padding-bottom":"0.06em","padding-left":"0.416em","margin-bottom":"-0.544em"}},[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"AF"}})],1)],1),m("mjx-base",[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1)],1)],1),m("mjx-msup",[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"0.363em"}},[m("mjx-mn",{staticClass:"mjx-n",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"2"}})],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"j"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"2212"}})],1),m("mjx-msub",[m("mjx-TeXAtom",[m("mjx-mover",[m("mjx-over",{staticStyle:{"padding-bottom":"0.06em","padding-left":"0.213em","margin-bottom":"-0.544em"}},[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"AF"}})],1)],1),m("mjx-base",[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"R"}})],1)],1)],1)],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1),m("mjx-msup",[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"0.363em"}},[m("mjx-mn",{staticClass:"mjx-n",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"2"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),m("p"),t._v(" "),m("ul",[m("li",[t._v("Jaccard相似度")])]),t._v(" "),m("p"),m("p",[m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML",display:"true"}},[m("mjx-math",{staticClass:" MJX-TEX",attrs:{display:"true"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"A"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"B"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"="}})],1),m("mjx-mfrac",{attrs:{space:"4"}},[m("mjx-frac",{attrs:{type:"d"}},[m("mjx-num",[m("mjx-nstrut",{attrs:{type:"d"}}),m("mjx-mrow",[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"r"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.153em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"A"}})],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"2229"}})],1),m("mjx-msub",{attrs:{space:"3"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"r"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"B"}})],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1)],1)],1),m("mjx-dbox",[m("mjx-dtable",[m("mjx-line",{attrs:{type:"d"}}),m("mjx-row",[m("mjx-den",[m("mjx-dstrut",{attrs:{type:"d"}}),m("mjx-mrow",[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"r"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.153em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"A"}})],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"222A"}})],1),m("mjx-msub",{attrs:{space:"3"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"r"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"B"}})],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),m("p"),t._v(" "),m("p",[t._v("杰拉德相似度没有考虑评分大小，仅仅计算用户之间的交集和并集物品的大小。")]),t._v(" "),m("h2",{attrs:{id:"基于用户的协同过滤usercf存在哪些缺陷"}},[m("a",{staticClass:"header-anchor",attrs:{href:"#基于用户的协同过滤usercf存在哪些缺陷"}},[t._v("#")]),t._v(" 基于用户的协同过滤UserCF存在哪些缺陷？")]),t._v(" "),m("p",[t._v("1）在一个典型的互联网产品中，比如京东、淘宝、豆瓣、知乎，用户数往往远远大于物品的数量，而基于用户的协同过滤需要维护一个用户相似性矩阵，以便可以快速找出TopN相似用户。而维护该用户相似度矩阵所需的存储开销巨大，且随着业务发展，用户数的增长会导致用户相似度矩阵的空间复杂度以"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-msup",[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"n"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"0.363em"}},[m("mjx-mn",{staticClass:"mjx-n",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"2"}})],1)],1)],1)],1)],1),t._v("的速度快速增长，会导致在线存储系统无法承载。")],1),t._v(" "),m("p",[t._v("2）用户的行为矩阵往往是非常稀疏的，他点击过或者发生过行为的物品只占全量物品的很小一部分，而对于这样行为很稀疏的用户来说，通过相似度矩阵去寻找相似用户，准确度很低，存在很大的偶然性，并不能说明其确实存在相似性。对于那些反馈获取很少的产品来说，很难有好的推荐效果。")]),t._v(" "),m("h2",{attrs:{id:"请简述基于物品的协同过滤itemcf的推荐过程。"}},[m("a",{staticClass:"header-anchor",attrs:{href:"#请简述基于物品的协同过滤itemcf的推荐过程。"}},[t._v("#")]),t._v(" 请简述基于物品的协同过滤ItemCF的推荐过程。")]),t._v(" "),m("p",[t._v("ItemCF(Item Collaboration Filter)，即基于物品的协同过滤算法，它通过计算共现矩阵中物品列向量的相似度得到物品之间的相似度矩阵，再找到用户的历史正反馈物品的相似物品进行进一步排序和推荐。具体过程如下：")]),t._v(" "),m("p",[t._v("1）构成共现矩阵")]),t._v(" "),m("table",[m("thead",[m("tr",[m("th"),t._v(" "),m("th",[t._v("item1")]),t._v(" "),m("th",[t._v("item2")]),t._v(" "),m("th",[t._v("item3")]),t._v(" "),m("th",[t._v("item4")]),t._v(" "),m("th",[t._v("item5")]),t._v(" "),m("th",[t._v("item6")])])]),t._v(" "),m("tbody",[m("tr",[m("td",[t._v("A")]),t._v(" "),m("td",[t._v("1")]),t._v(" "),m("td"),t._v(" "),m("td",[t._v("5")]),t._v(" "),m("td",[t._v("3")]),t._v(" "),m("td"),t._v(" "),m("td")]),t._v(" "),m("tr",[m("td",[t._v("B")]),t._v(" "),m("td"),t._v(" "),m("td",[t._v("3")]),t._v(" "),m("td"),t._v(" "),m("td"),t._v(" "),m("td",[t._v("3")]),t._v(" "),m("td")]),t._v(" "),m("tr",[m("td",[t._v("C")]),t._v(" "),m("td",[t._v("5")]),t._v(" "),m("td"),t._v(" "),m("td",[t._v("3")]),t._v(" "),m("td"),t._v(" "),m("td"),t._v(" "),m("td",[t._v("10")])]),t._v(" "),m("tr",[m("td",[t._v("D")]),t._v(" "),m("td",[t._v("10")]),t._v(" "),m("td"),t._v(" "),m("td"),t._v(" "),m("td"),t._v(" "),m("td",[t._v("5")]),t._v(" "),m("td")]),t._v(" "),m("tr",[m("td",[t._v("E")]),t._v(" "),m("td"),t._v(" "),m("td",[t._v("10")]),t._v(" "),m("td",[t._v("5")]),t._v(" "),m("td",[t._v("1")]),t._v(" "),m("td"),t._v(" "),m("td")])])]),t._v(" "),m("p",[t._v("2）物品相似度矩阵计算")]),t._v(" "),m("p",[t._v("计算共现矩阵两两列向量（物品向量）之间的相似度，构建物品相似度矩阵。")]),t._v(" "),m("p",[t._v("3）最终结果排序")]),t._v(" "),m("p",[t._v("针对用户历史正反馈物品列表，根据物品相似度矩阵，找出相似的TopN的物品，最终的物品排序计算逻辑如下：")]),t._v(" "),m("p"),m("p",[m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML",display:"true"}},[m("mjx-math",{staticClass:" MJX-TEX",attrs:{display:"true"}},[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"="}})],1),m("mjx-munder",{attrs:{space:"4"}},[m("mjx-row",[m("mjx-base",{staticStyle:{"padding-left":"0.031em"}},[m("mjx-mo",{staticClass:"mjx-lop"},[m("mjx-c",{attrs:{c:"2211"}})],1)],1)],1),m("mjx-row",[m("mjx-under",{staticStyle:{"padding-top":"0.167em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"h"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2208"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"H"}})],1)],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"w"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"h"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"B7"}})],1),m("mjx-msub",{attrs:{space:"3"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"h"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1)],1)],1)],1),t._v("\n其中"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"H"}})],1)],1)],1),t._v("为用户历史正反馈物品列表，"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"w"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"h"}})],1)],1)],1)],1)],1)],1),t._v("是物品"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1)],1)],1),t._v("与物品"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"h"}})],1)],1)],1),t._v("的相似度，"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"h"}})],1)],1)],1)],1)],1)],1),t._v("是用户"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1)],1)],1),t._v("对物品"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"h"}})],1)],1)],1),t._v("的已有评分。"),m("p"),t._v(" "),m("h2",{attrs:{id:"请简述一下基于物品的协同过滤算法的离线工程实现-spark"}},[m("a",{staticClass:"header-anchor",attrs:{href:"#请简述一下基于物品的协同过滤算法的离线工程实现-spark"}},[t._v("#")]),t._v(" 请简述一下基于物品的协同过滤算法的离线工程实现（spark）")]),t._v(" "),m("p",[t._v("假设共现矩阵为")]),t._v(" "),m("table",[m("thead",[m("tr",[m("th"),t._v(" "),m("th",[t._v("item1")]),t._v(" "),m("th",[t._v("item2")]),t._v(" "),m("th",[t._v("item3")]),t._v(" "),m("th",[t._v("item4")]),t._v(" "),m("th",[t._v("item5")])])]),t._v(" "),m("tbody",[m("tr",[m("td",[t._v("userA")]),t._v(" "),m("td",[t._v("1")]),t._v(" "),m("td"),t._v(" "),m("td",[t._v("5")]),t._v(" "),m("td",[t._v("3")]),t._v(" "),m("td")]),t._v(" "),m("tr",[m("td",[t._v("userB")]),t._v(" "),m("td"),t._v(" "),m("td",[t._v("3")]),t._v(" "),m("td"),t._v(" "),m("td",[t._v("2")]),t._v(" "),m("td",[t._v("3")])]),t._v(" "),m("tr",[m("td",[t._v("userC")]),t._v(" "),m("td",[t._v("5")]),t._v(" "),m("td"),t._v(" "),m("td",[t._v("3")]),t._v(" "),m("td"),t._v(" "),m("td",[t._v("2")])])])]),t._v(" "),m("ol",[m("li",[t._v("首先将所有用户有过反馈的item收集起来，形成一个用户行为向量RDD，格式为"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"d"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"q"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"d"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"c"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"o"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"r"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1)],1)],1),t._v("，具体如下：\n"),m("p",[m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML",display:"true"}},[m("mjx-math",{staticClass:" MJX-TEX",attrs:{display:"true"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"r"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"A"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mspace",{attrs:{space:"2"}}),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"r"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"B"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mspace",{attrs:{space:"2"}}),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"r"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"C"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1)],1)],1)],1)],1),t._v(" "),m("li",[t._v("对每个user的有过反馈的item做包含自身的笛卡尔积，并将对应的score相乘，得到如下的RDD：\n"),m("p",[m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML",display:"true"}},[m("mjx-math",{staticClass:" MJX-TEX",attrs:{display:"true"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"r"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"A"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"2"}}),m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"1"}}),m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-utext",{staticStyle:{"font-family":"serif"},attrs:{variant:"normal"}},[t._v("，")])],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"9"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mspace"),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"r"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"B"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"9"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"6"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"9"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"6"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"9"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mspace",{attrs:{space:"2"}}),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"r"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"C"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"2"}}),m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"1"}}),m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"1"}}),m("mjx-c",{attrs:{c:"0"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"6"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"9"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1)],1)],1)],1)]),t._v(" "),m("li",[t._v("将相同的item对进行group后相加：\n"),m("p",[m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML",display:"true"}},[m("mjx-math",{staticClass:" MJX-TEX",attrs:{display:"true"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"2"}}),m("mjx-c",{attrs:{c:"6"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"2"}}),m("mjx-c",{attrs:{c:"0"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"1"}}),m("mjx-c",{attrs:{c:"0"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mspace",{attrs:{space:"2"}}),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"9"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"6"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"9"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mspace",{attrs:{space:"2"}}),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"3"}}),m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"1"}}),m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"6"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mspace",{attrs:{space:"2"}}),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"1"}}),m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"4"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"6"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mspace"),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"1"}}),m("mjx-c",{attrs:{c:"3"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1)],1)],1)],1)])]),t._v(" "),m("p",[t._v("这样我们就得到了计算cosine相似度时所需的分子")]),t._v(" "),m("p"),m("p",[m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML",display:"true"}},[m("mjx-math",{staticClass:" MJX-TEX",attrs:{display:"true"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"j"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"="}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"c"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"o"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"j"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"="}})],1),m("mjx-mfrac",{attrs:{space:"4"}},[m("mjx-frac",{attrs:{type:"d"}},[m("mjx-num",[m("mjx-nstrut",{attrs:{type:"d"}}),m("mjx-mrow",[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"B7"}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"j"}})],1)],1)],1),m("mjx-dbox",[m("mjx-dtable",[m("mjx-line",{attrs:{type:"d"}}),m("mjx-row",[m("mjx-den",[m("mjx-dstrut",{attrs:{type:"d"}}),m("mjx-mrow",[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"B7"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"j"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"|"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),m("p"),t._v(" "),m("p",[t._v("而分母就是上述第3步得到的RDD过滤出item相同的，因为数量至多为item的个数，可将其广播出来，通过collectAsMap得到一个key为item，value为score的map。")]),t._v(" "),m("p",[t._v("这样分子分母都出来了，就可以计算item与item之间的相似度了。")]),t._v(" "),m("p",[t._v("以上步骤得到item之间的相似度，接下来计算每个item最相似的item的topK：")]),t._v(" "),m("p"),m("p",[m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML",display:"true"}},[m("mjx-math",{staticClass:" MJX-TEX",attrs:{display:"true"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"S"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"="}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"2192"}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"a"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"2192"}})],1),m("mjx-mspace",{attrs:{space:"4"}}),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"2192"}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"g"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"r"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"o"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"u"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"B"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"y"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"K"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"y"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"2192"}})],1),m("mjx-mspace",{attrs:{space:"4"}}),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"q"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"2192"}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"o"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"p"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"K"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"2192"}})],1),m("mjx-mspace",{attrs:{space:"4"}}),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"D"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"q"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"t"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"e"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"s"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1)],1)],1)],1),m("p"),t._v(" "),m("p",[t._v("如果我们把每个item最相似的K个标的物及相似度看成一个列向量的话，那么我们计算出的item相似度其实可以看作方阵"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"S"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"D7"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1)],1)],1)],1)],1)],1),t._v("，该矩阵每列K个非零元素。")],1),t._v(" "),m("p",[t._v("到此为止，我们通过Spark提供的一些Transformation操作及一些工程实现上的技巧计算出了每个标的物topK最相似的标的物,下面我们来说明一下为用户生成个性化推荐的过程：")]),t._v(" "),m("p",[t._v("假设给定需要推荐的用户行为矩阵为"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"A"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"n"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"D7"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1)],1)],1)],1)],1)],1),t._v("，其中n是用户数，m是item的数量，第i行第j列的元素代表了用户i对物品j的偏好。")],1),t._v(" "),m("p",[t._v("物品相似度矩阵为"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"S"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"D7"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1)],1)],1)],1)],1)],1),t._v("，这两个都是稀疏矩阵，我们通过计算这两个矩阵的乘积(Spark上是可以直接计算两个稀疏矩阵的乘积的)，最终的结果矩阵就可以方便用来为用户推荐了：")],1),t._v(" "),m("p"),m("p",[m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML",display:"true"}},[m("mjx-math",{staticClass:" MJX-TEX",attrs:{display:"true"}},[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"n"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"D7"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"="}})],1),m("mjx-msub",{attrs:{space:"4"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"A"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"n"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"D7"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1)],1)],1)],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"2217"}})],1),m("mjx-msub",{attrs:{space:"3"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"S"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"2217"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"m"}})],1)],1)],1)],1)],1)],1)],1),t._v("\n其中的第i行代表的是用户i对每个标的物的偏好得分，我们从这个列表中过滤掉用户操作过的item，然后按照得分从高到低降序排列取topN就是最终给用户的推荐。"),m("p"),t._v(" "),m("p",[t._v("也可以将item的相似度矩阵broadcast到各个节点上，并转化为map结构，有了item之间的相似度map，为用户计算推荐的过程可以基于用户行为RDD，在每个Partition中，针对每个用户u计算u与每个标的物之间的偏好度，再取topN就得到该用户的推荐结果了。")]),t._v(" "),m("h2",{attrs:{id:"协同过滤算法计算过程中的大规模稀疏矩阵相乘在spark中的现有方案-multiply-有什么缺陷-如何改进"}},[m("a",{staticClass:"header-anchor",attrs:{href:"#协同过滤算法计算过程中的大规模稀疏矩阵相乘在spark中的现有方案-multiply-有什么缺陷-如何改进"}},[t._v("#")]),t._v(" 协同过滤算法计算过程中的大规模稀疏矩阵相乘在spark中的现有方案（multiply）有什么缺陷？如何改进？")]),t._v(" "),m("p",[t._v("spark 可以通过 BlockMatrix 进行矩阵相乘，如下：")]),t._v(" "),m("div",{staticClass:"language- line-numbers-mode"},[m("pre",{pre:!0,attrs:{class:"language-text"}},[m("code",[t._v("from pyspark.mllib.linalg.distributed import *\nM_rdd = sc.parallelize([(0,0, 1), (0,1, 2), (0,2, 3), (1,0, 4), (1,1, 5), (1,2, 6)])\nN_rdd = sc.parallelize([(0,0, 7), (0,1, 8), (1,0, 9), (1,1, 10), (2,0, 11), (2,1, 12)])\nM = CoordinateMatrix(M_rdd).toBlockMatrix()\nN = CoordinateMatrix(N_rdd).toBlockMatrix()\nM.multiply(N).toCoordinateMatrix().entries.collect()\n")])]),t._v(" "),m("div",{staticClass:"line-numbers-wrapper"},[m("span",{staticClass:"line-number"},[t._v("1")]),m("br"),m("span",{staticClass:"line-number"},[t._v("2")]),m("br"),m("span",{staticClass:"line-number"},[t._v("3")]),m("br"),m("span",{staticClass:"line-number"},[t._v("4")]),m("br"),m("span",{staticClass:"line-number"},[t._v("5")]),m("br"),m("span",{staticClass:"line-number"},[t._v("6")]),m("br")])]),m("p",[t._v("但在spark 的官方文档中关于 multiply 这个方法的描述：")]),t._v(" "),m("div",{staticClass:"language- line-numbers-mode"},[m("pre",{pre:!0,attrs:{class:"language-text"}},[m("code",[t._v("Left multiplies this BlockMatrix by other, another BlockMatrix. The colsPerBlock of this matrix must equal the rowsPerBlock of other. If other contains any SparseMatrix blocks, they will have to be converted to DenseMatrix blocks. The output BlockMatrix will only consist of DenseMatrix blocks. This may cause some performance issues until support for multiplying two sparse matrices is added.\n")])]),t._v(" "),m("div",{staticClass:"line-numbers-wrapper"},[m("span",{staticClass:"line-number"},[t._v("1")]),m("br")])]),m("p",[t._v("就是说，BlockMatrix 在进行矩阵乘法时会先把稀疏矩阵转换成稠密矩阵！！对于一个 10000 x 10000 的稀疏矩阵，实际存储的可能只有几万个非零元素，而转换成稠密矩阵后，你需要对所有 10000 x 10000 = 1亿 个元素提供存储空间！！而实际场景面对的稀疏矩阵的维度远远大于 10000，所以 BlockMatrix 无法适用于大规模稀疏矩阵运算。")]),t._v(" "),m("p",[t._v("如何去解决呢？我们先来看一下矩阵乘法的公式：")]),t._v(" "),m("p",[t._v("$$P_{i,k}=\\sum_jm_{ij}*n_{jk} $$")]),t._v(" "),m("p",[m("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNly1gspru9r0jaj30i0051glp.jpg",alt:""}})]),t._v(" "),m("p",[t._v("从矩阵乘法公式可知，矩阵相乘主要有以下环节：")]),t._v(" "),m("ol",[m("li",[t._v("左矩阵的列号(j)与右矩阵的行号(j)相同的元素进行两两相乘得到 "),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"M"}})],1),m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"N"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"k"}})],1)],1)],1)],1)],1)],1),t._v("。")],1),t._v(" "),m("li",[t._v("对所有具有相同下标(ik)的 "),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"M"}})],1),m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"N"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"k"}})],1)],1)],1)],1)],1)],1),t._v(" 进行相加，即得到"),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"P"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"k"}})],1)],1)],1)],1)],1)],1),t._v("。")],1)]),t._v(" "),m("p",[t._v("我们可以基于 RDD 实现矩阵乘法")]),t._v(" "),m("p",[t._v("思路：")]),t._v(" "),m("ol",[m("li",[t._v("先通过 map 函数构建以左矩阵的列号(j)和右矩阵的行号(j)作为 key 的数据结构。即 "),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"j"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-msub",{attrs:{space:"2"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"L"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"v"}})],1)],1)],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"a"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"l"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1)],1)],1),t._v(" 和 "),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"j"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"k"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-msub",{attrs:{space:"2"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"v"}})],1)],1)],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"a"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"l"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1)],1)],1),t._v("。")],1),t._v(" "),m("li",[t._v("对上一步骤进行 join 运算得到 "),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"j"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"["}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-msub",{attrs:{space:"2"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"L"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"v"}})],1)],1)],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"a"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"l"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"k"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-msub",{attrs:{space:"2"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"v"}})],1)],1)],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"a"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"l"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"]"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1)],1)],1),t._v("。")],1),t._v(" "),m("li",[t._v("对上一步骤的值通过 map 函数构建以左矩阵的行号(i)和右矩阵的列号(k)作为 key , 且对应元素的积作为 value 的数据结构。即 "),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"i"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-mi",{staticClass:"mjx-i",attrs:{space:"2"}},[m("mjx-c",{attrs:{c:"k"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:","}})],1),m("mjx-msub",{attrs:{space:"2"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"L"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"v"}})],1)],1)],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"a"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"l"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"2217"}})],1),m("mjx-msub",{attrs:{space:"3"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"R"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"v"}})],1)],1)],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"a"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"l"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1)],1)],1),t._v("。")],1),t._v(" "),m("li",[t._v("对上一步骤进行 reduceByKey, 对 (i,k) 相同的两两结果进行相加即得到第i行第k列的结果, 即 "),m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[m("mjx-math",{staticClass:" MJX-TEX"},[m("mjx-msub",[m("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[m("mjx-c",{attrs:{c:"P"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[m("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[m("mjx-c",{attrs:{c:"i"}})],1)],1)],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"k"}})],1)],1)],1),t._v("。")],1)]),t._v(" "),m("div",{staticClass:"language- line-numbers-mode"},[m("pre",{pre:!0,attrs:{class:"language-text"}},[m("code",[t._v("from pyspark.mllib.linalg.distributed import *\nM_rdd = sc.parallelize([(0, 0, 1), (0, 1, 2), (0, 2, 3), (1, 0, 4), (1, 1, 5), (1, 2, 6)])\nN_rdd = sc.parallelize([(0, 0, 7), (0, 1, 8), (1, 0, 9), (1, 1, 10), (2, 0, 11), (2, 1, 12)])\nM = CoordinateMatrix(M_rdd)\nN = CoordinateMatrix(N_rdd)\n \nM = M.entries.map(lambda entry: (entry.j, (entry.i, entry.value)))\nN = N.entries.map(lambda entry: (entry.i, (entry.j, entry.value)))\n \nmatrix_entries = M.join(N).values().map(\n    lambda x: ((x[0][0], x[1][0]), x[0][1] * x[1][1])\n).reduceByKey(\n    lambda x, y: x + y\n).map(\n    lambda x: MatrixEntry(x[0][0], x[0][1], x[1])\n)\n \nmatrix = CoordinateMatrix(matrix_entries)\nmatrix.entries.collect()\n \n######## 输出 #############\n# [MatrixEntry(0, 0, 58.0),\n#  MatrixEntry(1, 0, 139.0),\n#  MatrixEntry(0, 1, 64.0),\n#  MatrixEntry(1, 1, 154.0)]\n")])]),t._v(" "),m("div",{staticClass:"line-numbers-wrapper"},[m("span",{staticClass:"line-number"},[t._v("1")]),m("br"),m("span",{staticClass:"line-number"},[t._v("2")]),m("br"),m("span",{staticClass:"line-number"},[t._v("3")]),m("br"),m("span",{staticClass:"line-number"},[t._v("4")]),m("br"),m("span",{staticClass:"line-number"},[t._v("5")]),m("br"),m("span",{staticClass:"line-number"},[t._v("6")]),m("br"),m("span",{staticClass:"line-number"},[t._v("7")]),m("br"),m("span",{staticClass:"line-number"},[t._v("8")]),m("br"),m("span",{staticClass:"line-number"},[t._v("9")]),m("br"),m("span",{staticClass:"line-number"},[t._v("10")]),m("br"),m("span",{staticClass:"line-number"},[t._v("11")]),m("br"),m("span",{staticClass:"line-number"},[t._v("12")]),m("br"),m("span",{staticClass:"line-number"},[t._v("13")]),m("br"),m("span",{staticClass:"line-number"},[t._v("14")]),m("br"),m("span",{staticClass:"line-number"},[t._v("15")]),m("br"),m("span",{staticClass:"line-number"},[t._v("16")]),m("br"),m("span",{staticClass:"line-number"},[t._v("17")]),m("br"),m("span",{staticClass:"line-number"},[t._v("18")]),m("br"),m("span",{staticClass:"line-number"},[t._v("19")]),m("br"),m("span",{staticClass:"line-number"},[t._v("20")]),m("br"),m("span",{staticClass:"line-number"},[t._v("21")]),m("br"),m("span",{staticClass:"line-number"},[t._v("22")]),m("br"),m("span",{staticClass:"line-number"},[t._v("23")]),m("br"),m("span",{staticClass:"line-number"},[t._v("24")]),m("br"),m("span",{staticClass:"line-number"},[t._v("25")]),m("br")])]),m("p",[t._v("也可以基于DataFrame 实现矩阵乘法")]),t._v(" "),m("ul",[m("li",[t._v("基于 DataFrame 方式并非将每一列号作为一个单独字段，而是将矩阵里面的每一个元素看成一个三维数据，即（行号，列号，值），将一个矩阵转化为一个包含三个字段的 table，对于一个稀疏矩阵，只需要记录非零元素，即 100 个非零元素就对应 DataFrame 的 100 行。")]),t._v(" "),m("li",[t._v("计算逻辑与 RDD 方式非常相似，主要有三个流程 join => groupby => agg。")]),t._v(" "),m("li",[t._v("基于 DataFrame 方式能大幅度提升运算速度，因为 DataFrame 相比 RDD 有更佳的优化支持。")])]),t._v(" "),m("div",{staticClass:"language- line-numbers-mode"},[m("pre",{pre:!0,attrs:{class:"language-text"}},[m("code",[t._v("from pyspark.mllib.linalg.distributed import *\nfrom pyspark.sql import SparkSession, functions as F\n \nss = SparkSession.builder.appName(\"test\") \\\n    .config(\"spark.serializer\", \"org.apache.spark.serializer.KryoSerializer\") \\\n    .getOrCreate()\n \nM_rdd = sc.parallelize([(0, 0, 1), (0, 1, 2), (0, 2, 3), (1, 0, 4), (1, 1, 5), (1, 2, 6)])\nN_rdd = sc.parallelize([(0, 0, 7), (0, 1, 8), (1, 0, 9), (1, 1, 10), (2, 0, 11), (2, 1, 12)])\n \nM = ss.createDataFrame(M_rdd, ['l_row', 'l_column', 'l_val'])\nN = ss.createDataFrame(N_rdd, ['r_row', 'r_column', 'r_val'])\nM.join(\n    N, M['l_column']==N['r_row']\n).groupBy(\n    'l_row', 'r_column'\n).agg(\n    F.sum(M['l_val']*N['r_val'])\n).toDF('row', 'column', 'val').show()\n\n######## 输出 #############\n# +---+------+---+\n# |row|column|val|\n# +---+------+---+\n# |  1|     1|154|\n# |  0|     1| 64|\n# |  1|     0|139|\n# |  0|     0| 58|\n# +---+------+---+\n\n")])]),t._v(" "),m("div",{staticClass:"line-numbers-wrapper"},[m("span",{staticClass:"line-number"},[t._v("1")]),m("br"),m("span",{staticClass:"line-number"},[t._v("2")]),m("br"),m("span",{staticClass:"line-number"},[t._v("3")]),m("br"),m("span",{staticClass:"line-number"},[t._v("4")]),m("br"),m("span",{staticClass:"line-number"},[t._v("5")]),m("br"),m("span",{staticClass:"line-number"},[t._v("6")]),m("br"),m("span",{staticClass:"line-number"},[t._v("7")]),m("br"),m("span",{staticClass:"line-number"},[t._v("8")]),m("br"),m("span",{staticClass:"line-number"},[t._v("9")]),m("br"),m("span",{staticClass:"line-number"},[t._v("10")]),m("br"),m("span",{staticClass:"line-number"},[t._v("11")]),m("br"),m("span",{staticClass:"line-number"},[t._v("12")]),m("br"),m("span",{staticClass:"line-number"},[t._v("13")]),m("br"),m("span",{staticClass:"line-number"},[t._v("14")]),m("br"),m("span",{staticClass:"line-number"},[t._v("15")]),m("br"),m("span",{staticClass:"line-number"},[t._v("16")]),m("br"),m("span",{staticClass:"line-number"},[t._v("17")]),m("br"),m("span",{staticClass:"line-number"},[t._v("18")]),m("br"),m("span",{staticClass:"line-number"},[t._v("19")]),m("br"),m("span",{staticClass:"line-number"},[t._v("20")]),m("br"),m("span",{staticClass:"line-number"},[t._v("21")]),m("br"),m("span",{staticClass:"line-number"},[t._v("22")]),m("br"),m("span",{staticClass:"line-number"},[t._v("23")]),m("br"),m("span",{staticClass:"line-number"},[t._v("24")]),m("br"),m("span",{staticClass:"line-number"},[t._v("25")]),m("br"),m("span",{staticClass:"line-number"},[t._v("26")]),m("br"),m("span",{staticClass:"line-number"},[t._v("27")]),m("br"),m("span",{staticClass:"line-number"},[t._v("28")]),m("br"),m("span",{staticClass:"line-number"},[t._v("29")]),m("br"),m("span",{staticClass:"line-number"},[t._v("30")]),m("br")])]),m("p",[t._v("以下是这三种方法的性能对比：")]),t._v(" "),m("ul",[m("li",[t._v("DataFrame 方式性能上最好；")]),t._v(" "),m("li",[t._v("BlockMatrix 方式虽然比 RDD 方式速度更快，但当矩阵维度增大后非常容易出现 OOM 问题；")])]),t._v(" "),m("p",[m("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNly1gspsb2i8j7j30wo0bndgs.jpg",alt:""}})]),t._v(" "),m("h2",{attrs:{id:"请简述协同过滤算法的优缺点"}},[m("a",{staticClass:"header-anchor",attrs:{href:"#请简述协同过滤算法的优缺点"}},[t._v("#")]),t._v(" 请简述协同过滤算法的优缺点")]),t._v(" "),m("ul",[m("li",[t._v("优点")])]),t._v(" "),m("p",[t._v("1、算法原理朴素简单，即“物以类聚，人以群分”，已得到工业界验证过的一类重要算法，在Netflix、Google、Amazon及国内大型互联网公司都有很好的落地和应用；\n2、易利用Spark分布式平台来实现，因此可以通过增加计算节点很容易处理大规模数据集；\n3、可以很好的为用户推荐多样性、新颖性的item。特别是当群体规模越大，用户行为越多，推荐的效果越好。\n4、只依赖用户的操作行为，不依赖具体user相关和item相关的信息就可以实现，往往user信息和item信息都是比较复杂的半结构化或者非结构化的信息，处理起来很不方便。这是一个极大的优势，正因为这个优势让协同过滤算法在工业界大放异彩。")]),t._v(" "),m("p",[t._v("缺点：")]),t._v(" "),m("p",[t._v("1、冷启动问题")]),t._v(" "),m("p",[t._v("协同过滤算法依赖用户的行为来为用户做推荐，如果用户行为少(比如新上线的产品或者用户规模不大的产品)，这时就很难发挥协同过滤算法的优势和价值，甚至根本无法为用户做推荐")]),t._v(" "),m("p",[t._v("对于新入库的item，由于只有很少的用户操作行为，这时相当于用户行为矩阵中该item对应的列基本都是零，这时无法计算出该item的相似item，同时，该item也不会出现在其他标的物的相似列表中，因此无法将该item推荐出去。这时，可以采用人工的策略将该item在一定的位置曝光，或者强行以一定的比例或者概率加入推荐列表中，通过收集该item的行为解决该标的物无法被推荐出去的问题。")]),t._v(" "),m("p",[t._v("2、稀疏性问题")]),t._v(" "),m("p",[t._v("互联网产品用户基数大，item数量多(特别是新闻、UGC短视频类产品)，一般用户只对很少量的item产生操作行为，这是用户操作行为矩阵是非常稀疏的，太稀疏的行为矩阵计算出的item相似度往往不够精准，最终影响推荐结果的精准度。")]),t._v(" "),m("h2",{attrs:{id:"在实际业务中-为了让协同过滤有更好的效果-对业务产生较大的价值-我们在使用该算法时需要注意哪些问题"}},[m("a",{staticClass:"header-anchor",attrs:{href:"#在实际业务中-为了让协同过滤有更好的效果-对业务产生较大的价值-我们在使用该算法时需要注意哪些问题"}},[t._v("#")]),t._v(" 在实际业务中，为了让协同过滤有更好的效果，对业务产生较大的价值，我们在使用该算法时需要注意哪些问题？")]),t._v(" "),m("p",[t._v("1、考虑是使用userCF还是itemCF：")]),t._v(" "),m("p",[t._v("在互联网产品中一般会采用itemCF协同过滤，因为user相对于item变化更大，用户是增长较快的，item增长相对较慢(这也不是绝对的，像新闻、短视频类应用标的物也是增速巨大的)，利用itemCF算法效果更稳定。")]),t._v(" "),m("p",[t._v("2、时间加权")]),t._v(" "),m("p",[t._v("一般来说，用户的兴趣是随着时间变化的，越是久远的行为对用户当前的兴趣贡献越小，基于此，可以对用户行为矩阵做时间加权处理。将用户评分加上一个时间惩罚因子，对久远的行为进行一定的惩罚，可行的惩罚方案可以采用指数衰减的方式。例如，我们可以采用如下的公式来对时间做衰减，我们可以选择一个时间作为基准值，比如当前时间，下式中的n是item操作时间与基准时间相差的天数(n=0时，w(0)=1)。")]),t._v(" "),m("p"),m("p",[m("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML",display:"true"}},[m("mjx-math",{staticClass:" MJX-TEX",attrs:{display:"true"}},[m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"w"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"("}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"n"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:")"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"="}})],1),m("mjx-mn",{staticClass:"mjx-n",attrs:{space:"4"}},[m("mjx-c",{attrs:{c:"0"}}),m("mjx-c",{attrs:{c:"."}}),m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[m("mjx-c",{attrs:{c:"+"}})],1),m("mjx-msup",[m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"0"}}),m("mjx-c",{attrs:{c:"."}}),m("mjx-c",{attrs:{c:"5"}})],1),m("mjx-script",{staticStyle:{"vertical-align":"0.413em"}},[m("mjx-TeXAtom",{attrs:{size:"s"}},[m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"1"}})],1),m("mjx-mo",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"+"}})],1),m("mjx-mn",{staticClass:"mjx-n"},[m("mjx-c",{attrs:{c:"0"}}),m("mjx-c",{attrs:{c:"."}}),m("mjx-c",{attrs:{c:"0"}}),m("mjx-c",{attrs:{c:"2"}})],1),m("mjx-mi",{staticClass:"mjx-i"},[m("mjx-c",{attrs:{c:"n"}})],1)],1)],1)],1)],1)],1)],1),m("p"),t._v(" "),m("p",[t._v("3、隐式反馈评分")]),t._v(" "),m("p",[t._v("在真实业务场景中，用户不一定对item评分，可能只有操作行为。这时可以采用隐式反馈的方式来做协同过滤，虽然隐式反馈的效果可能会差一些。")]),t._v(" "),m("p",[t._v("但同时，我们是可以通过一些方法和技巧来间接获得隐式反馈的评分，主要有如下两类方法，通过这两类方法获得评分，是非常直观的，效果肯定比隐式反馈直接用0或者1好。")]),t._v(" "),m("p",[t._v("基于用户的浏览、点击、点赞、购买、收藏、分享、评论等隐式行为的投入度，即投入的时间成本、资金成本、社交压力等，投入成本越大给定越高的分数，对这些行为人为打分，比如浏览给1分，点赞给2分，转发给4分等等。这样我们就可以针对用户不同的行为生成差异化的评分。")]),t._v(" "),m("p",[t._v("对于像音乐、视频、文章等，我们可以记录用户在消费这些item上所花的时间来计算评分。拿视频来说，如果一个电影总时长是100分钟，如果用户看了60分钟就退出了，那么我们就可以给用户打6分。")]),t._v(" "),m("h2",{attrs:{id:"协同过滤算法会存在冷启动的问题-主要体现在哪里"}},[m("a",{staticClass:"header-anchor",attrs:{href:"#协同过滤算法会存在冷启动的问题-主要体现在哪里"}},[t._v("#")]),t._v(" 协同过滤算法会存在冷启动的问题，主要体现在哪里？")]),t._v(" "),m("ul",[m("li",[t._v("用户冷启动")])]),t._v(" "),m("p",[t._v("用户冷启动就是新用户没有太多的行为，我们无法为他计算个性化推荐。这时可行的推荐策略是为这类用户推荐热门标的物、通过人工编排筛选出的标的物。或者用户只有很少的行为，协同过滤效果也不好，这时可以采用基于内容的推荐算法补充。")]),t._v(" "),m("ul",[m("li",[t._v("物品冷启动")])]),t._v(" "),m("p",[t._v("新的标的物加入系统，没有用户操作行为，这时协同过滤算法也无法将该标的物推荐给用户。可行的解决方案有三个：")]),t._v(" "),m("ol",[m("li",[t._v("人工曝光到较好的推荐位上，在短时间内获取足够多的用户行为，但如果该item不够主流，会影响用户体验；")]),t._v(" "),m("li",[t._v("在推荐算法上做一些策略，可以将这类新的item以一定的概率混杂在用户的推荐列表中，让这些标的物有足够多的曝光，在曝光过程中收集用户行为，同时该方法也可以提升用户推荐的多样性。")]),t._v(" "),m("li",[t._v("通过基于内容的推荐算法来分发出去")])]),t._v(" "),m("ul",[m("li",[t._v("系统冷启动")])]),t._v(" "),m("p",[t._v("所谓系统冷启动，就是该产品是一个新开发不久的产品，还在发展用户初期阶段，这时协同过滤算法基本无法起作用，最好采用基于内容的推荐算法或者直接利用编辑编排一些多样性的优质内容作为推荐备选推荐集。")]),t._v(" "),m("h2",{attrs:{id:"协同过滤算法可以用于哪些推荐业务场景"}},[m("a",{staticClass:"header-anchor",attrs:{href:"#协同过滤算法可以用于哪些推荐业务场景"}},[t._v("#")]),t._v(" 协同过滤算法可以用于哪些推荐业务场景？")]),t._v(" "),m("p",[t._v("1、完全个性化推荐")]),t._v(" "),m("p",[t._v("即为每个用户推荐不一样的标的物推荐列表，比如淘宝猜你喜欢；")]),t._v(" "),m("p",[t._v("2、item关联item推荐")]),t._v(" "),m("p",[t._v("利用该item相似度可以计算某个item最相似的K个item，这K个最相似的标的物就可以作为该标的物的关联推荐。比如豆瓣的相似影片推荐。")]),t._v(" "),m("p",[t._v("3、其他应用形式及场景")]),t._v(" "),m("p",[t._v("将用户或者物品用向量表示(用户行为矩阵中的行向量和列向量)，有了用户和标的物的向量表示，我们就可以对用户和物品做聚类了。")]),t._v(" "),m("p",[t._v("对用户聚类后，当然可以用于做推荐，将同一类中其他用户操作过的标的物推荐给该用户就是一种可行的推荐策略。同时，用户聚类后，也可以用于做lookalike类的商业化(如广告)尝试。")]),t._v(" "),m("p",[t._v("对物品聚类后，也可以用于做物品关联推荐，将同一类中的其他物品作为关联推荐结果。另外，物品聚类后，这些类可以作为专题供编辑或者运营团队来作为一种内容分发的素材。")]),t._v(" "),m("h2",{attrs:{id:"请简述近实时协同过滤算法的工程实现"}},[m("a",{staticClass:"header-anchor",attrs:{href:"#请简述近实时协同过滤算法的工程实现"}},[t._v("#")]),t._v(" 请简述近实时协同过滤算法的工程实现")]),t._v(" "),m("p",[t._v("近实时的协同过滤主要用于对时效性要求比较高的产品形态，比如新闻、短视频等应用。这些应用item更新快，用户消耗一个item(读一篇文章、看一段短视频)所花的时间较短，这类应用一般是用于填补用户的碎片化时间的。而对于电商、视频等产品，近实时的协同过滤不是必须的。")]),t._v(" "),m("hr"),t._v(" "),m("p",[m("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNly1gtqjt0a9rnj61ou0pwaci02.jpg",alt:""}})])],1)}),[],!1,null,null,null);s.default=c.exports}}]);